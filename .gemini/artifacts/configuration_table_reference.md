# Configuration Table - Quick Reference

## New Unified Table Structure

### Column Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Make   â”‚ Order Code  â”‚ Wattage â”‚     Driver       â”‚   Accessories     â”‚ Qty â”‚   Total    â”‚ Action â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Philips  â”‚ DN060B      â”‚  6W     â”‚  Philips         â”‚  [XZT] [ABC]      â”‚  10 â”‚ â‚¹12,500.00 â”‚   ðŸ—‘ï¸   â”‚
â”‚          â”‚             â”‚         â”‚  HV9910          â”‚                   â”‚     â”‚            â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Osram    â”‚ DL-SLIM-9   â”‚  9W     â”‚  No driver       â”‚  No accessories   â”‚  25 â”‚ â‚¹45,000.00 â”‚   ðŸ—‘ï¸   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Havells  â”‚ LED-12W     â”‚ 12W     â”‚  Mean Well       â”‚  [MOUNT] [CONN]   â”‚  15 â”‚ â‚¹67,800.00 â”‚   ðŸ—‘ï¸   â”‚
â”‚          â”‚             â”‚         â”‚  LPF-25D         â”‚  [CABLE]          â”‚     â”‚            â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Column Descriptions

### 1. **Make** (Product Manufacturer)
- **Data Source**: `row.product_detail.make`
- **Display**: Plain text
- **Fallback**: "-" if missing

### 2. **Order Code** (Product Code)
- **Data Source**: `row.product_detail.order_code`
- **Display**: **Bold** text (primary identifier)
- **Fallback**: "-" if missing

### 3. **Wattage** (Power Consumption)
- **Data Source**: `row.product_detail.wattage`
- **Display**: Number with "W" suffix (e.g., "12 W")
- **Fallback**: "-" if missing

### 4. **Driver** (Power Driver Details)
- **Data Source**: `row.driverData`
- **Display**: 
  ```
  Make (bold)
  Order Code (muted)
  ```
- **Fallback**: "No driver" (muted text)
- **Example**:
  ```
  Philips
  HV9910
  ```

### 5. **Accessories** (Additional Components)
- **Data Source**: `row.accessoriesData[]`
- **Display**: Compact tags in flex layout
- **Fallback**: "No accessories" (muted text)
- **Example**: `[XZT] [ABC] [MOUNT]`
- **Supports**: Multiple accessories per product

### 6. **Qty** (Quantity)
- **Data Source**: `row.quantity`
- **Display**: Editable number input
- **Input Properties**:
  - Minimum: 1
  - Width: 70px
  - Center aligned
  - Disabled when BOQ approved
- **On Change**: Triggers `onUpdateQty(id, newQty)`

### 7. **Total** (Line Total Price)
- **Calculation**: 
  ```
  (Product Price + Driver Price + Î£ Accessory Prices) Ã— Quantity
  ```
- **Display**: 
  - **Bold** text in dark color
  - Indian Rupee format: `â‚¹12,345.67`
  - 2 decimal places
  - Thousand separators
- **Example**: `â‚¹1,234,567.89`

### 8. **Action** (Delete Button)
- **Display**: Trash icon button
- **On Click**: Triggers `onDelete(id)`
- **Disabled**: When BOQ approved

## Total Calculation Examples

### Example 1: Product Only
```
Product:     â‚¹1,000.00
Driver:      â‚¹0.00      (no driver)
Accessories: â‚¹0.00      (no accessories)
Quantity:    10
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total:       â‚¹10,000.00
```

### Example 2: Product + Driver
```
Product:     â‚¹1,500.00
Driver:      â‚¹500.00
Accessories: â‚¹0.00      (no accessories)
Quantity:    25
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total:       â‚¹50,000.00
```

### Example 3: Product + Driver + Accessories
```
Product:     â‚¹2,000.00
Driver:      â‚¹600.00
Accessories: â‚¹200.00    (â‚¹100 + â‚¹50 + â‚¹50)
Quantity:    15
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total:       â‚¹42,000.00
```

## Summary Statistics

Displayed in header when configurations exist:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Products: 25 | Total: â‚¹1,234,567.89            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Calculation**:
- **Products**: Count of all configuration rows
- **Total**: Sum of all row totals

## Visual States

### Normal State
- White background
- All inputs enabled
- Delete button enabled
- Quantity editable

### Locked State (BOQ Approved)
- Light gray background for inputs
- All inputs disabled
- Delete button disabled
- Pointer cursor shows "not-allowed"
- Banner shows: "ðŸ”’ This BOQ version is locked"

### Empty State
- No table shown
- Card with message: "âš¡ No configuration yet"
- "Add Product" button prominent
- Centered layout

## Responsive Behavior

### Desktop (> 1024px)
- Full table with all columns
- Comfortable spacing
- Large buttons

### Tablet (768px - 1024px)
- Slightly condensed columns
- Maintained readability
- Buttons remain visible

### Mobile (< 768px)
- Consider card layout instead of table
- Stack information vertically
- Large touch targets

## Accessibility

### Keyboard Navigation
- âœ… Tab through quantity inputs
- âœ… Tab to delete buttons
- âœ… Enter to confirm quantity change

### Screen Readers
- âœ… Proper column headers
- âœ… Row identifiers (product order code)
- âœ… Button labels
- âœ… Input labels

### Visual Indicators
- âœ… Clear disabled state
- âœ… High contrast text
- âœ… Large click targets (48px buttons)

## Performance Considerations

### Optimization Techniques
1. **useMemo** for expensive calculations
2. **Debounced quantity updates** (consider adding)
3. **Virtual scrolling** for 100+ rows (future)
4. **Pagination** for very large datasets (future)

### Current Limits
- Comfortable: Up to 50 configurations
- Acceptable: Up to 200 configurations
- Consider pagination: Beyond 200 configurations

## Data Flow Diagram

```
User Action
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Quantity Change  â”‚ â†’ onUpdateQty(id, qty)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â†“
                      API PATCH /configurations/{id}/
                           â†“
                      loadProjectConfigurations()
                           â†“
                      configMapper()
                           â†“
                      Table Re-renders
                           â†“
                      âœ… New Total Displayed
```

## Integration Points

### Parent Components
- `ProjectWorkspace.tsx` (PROJECT_LEVEL and AREA_WISE)
- `UnifiedConfigurationTab.tsx` (wrapper)

### Props Required
```typescript
{
  data: Configuration[];           // Mapped configurations
  loadConfigurations: () => void; // Refresh function
  isLocked?: boolean;             // BOQ approval status
}
```

### Callbacks
```typescript
onUpdateQty(id: number, qty: number): Promise<void>
onDelete(id: number): Promise<void>
```

---

**Quick Tip**: To add a new column, insert it in the `productColumns` array and the table will automatically render it! ðŸš€
